# 5374をあなたの地域に導入するには

あなたの地域で5374を立ち上げたい場合、以下のドキュメントがきっと役立ちます。ご参考ください。

- [5374(ゴミナシ).jpサービスの立ち上げに必要なデータの準備](http://qiita.com/tosato3/items/e7a231e8190508e278fa)
- [地元の 5374 を、自前サーバを用意せずに github pages で公開する手順](http://qiita.com/kuboon/items/1b4f64a42ce5365fb1c7)

##サブドメイン割り当てについて

あなたの地域の5374を作成したら、kanazawa.5374.jpのように
、地域用のサブドメインを割り当てますので、
割り当てて欲しいサブドメイン名と作成した5374のURL等を明記の上このアドレスまでご連絡ください。

5374@codeforkanazawa.org



## 5374のカスタマイズについて

* **基本的なカスタマイズ**: 基本的にはdataフォルダの中を変更していただければ、データが変更できます。詳細については、次節の「仕様」を参照ください。

* **特殊なカスタマイズ**: 自治体によっては、収集日や収集方法が複雑で、そのままでは対応できない場合があります。そんなときは、「その他のカスタマイズについて」の節を参照ください。

* **デザインのガイドライン**: Code for Kanazawaでは美しいデザインで問題解決を出来ればと考えています。ゴミの項目数など金沢市と違う所もあると思いますが、使う色に関してのデザインガイドラインを作成しました。同梱の 5374colormanual.pdf を参考に色を指定して頂けると幸いです。


## 仕様

dataディレクトリ内の以下のCSVについて、その仕様をまとめます。

* data/
	* area_days.csv
	* center.csv
	* description.csv
	* remarks.csv
	* target.csv


### area_days.csv

各エリアのゴミを出す曜日を記述します。
特に金沢の場合、1月にセンターが休止期間があり、
その期間1週間ずらすという仕様のため、センターの名称を記述します。

* **地名**: ゴミの地名を記述します。

* **センター**: 上記の理由で、ゴミ処理センターを記述します。data/center.csvと対応した、名称を記述します。※特にそのような仕様がない場合は、センターの列は、空文字でも大丈夫です。

* **ゴミのカテゴリ**: 3列目以降は「燃やすごみ」「資源」などゴミのカテゴリが並びます。地域によってカテゴリが異なるので。ゴミの捨てる曜日を記述します。書式は、次項を参照。

* **不定期な日付**: 不定期な日付を形式YYYYMMDD半角スペース区切りで、20140301 20140325・・・というように指定します。 


#### ゴミのカテゴリの書式について

曜日は「日」・「月」・「火」・「水」・「木」・「金」・「土」という各曜日の一文字を記述します。

* 毎週の場合は、一文字だけ記述する。
* 複数ある場合は、半角スペースで区切り記述する。つまり、毎週月曜・木曜の場合は `月 木`と記述する。
* 毎月第1週月曜の場合は、`月1`と記述する。

#### 毎月収集が無いゴミ

毎月収集が無いゴミは対象月をコロン(:)の後に指定できます。 例えば、4、6、8、10、12、2月の偶数月の第2火曜、第4金曜の場合には、 `火2 金4:4 6 8 10 12 2` のように記述します。(茨城町版仕様より追加)

※この機能を利用する場合は、下記にあるsetting.jsの`WeekShift = true`を`false`に変更して下さい。

#### 特別な条件 (remarks)

収集日について、特別な条件がある場合、例えば「一部地域(渋谷1・2・3丁目)で収集曜日が異なります。」などという条件がある場合、data/remarks.csv を用意し注意事項を追加した後、`*` につづいてremarks.csv のID番号を記述してください。つまり、remarks.csv のID1番を表示したい場合は、`火 木 *1` のように記述します。(渋谷区版仕様より追加)

#### 収集が不定期な場合

生駒市の方からプルリクエストで、回収日が不定期な場合にも簡単に対応する事ができるようになりました。

不定期な日付を半角スペース区切りで、以下のように指定します。

	20140301 20140325・・・

※形式はYYYYMMDDとなります。


### center.csv

上記の理由で、センターの休止期間を記述します。
そういった仕様がない場合は、空のファイルにしてもらっても大丈夫です。


### description.csv

各ゴミの分別を記述します。

* **label**: ゴミの分別名を記述します。

* **sublabel**: 現在、使用されておりません。

* **description**: 現在、使用されておりません。

* **styles**: カテゴリの表示となる。イメージ画像を指定します。(デフォルトはsvgとなっております。)

* **bgcolor**: 背景で使う色を指定して下さい。


### remarks.csv

ゴミ収集日に注意事項を追加したい場合に記述します。特別な条件がなければ使いません。

```
ID,注意事項
```

の形で記述してください。
例えば以下のようになります。

```
1,一部地域(渋谷1・2・3丁目)で収集曜日が異なります。
```


### target.csv

あるゴミが、どのゴミの日に捨てられるかのリストを表す。
画面表示上では、各ゴミをタップした時のアコーディオンをタップした時の
表示されるものである。


* **type**: typeの値としてはそれぞれ description.csv で記述したものでこれをもとに、紐付けを行う。(例:「燃えるゴミ」、「燃えないゴミ」、「びんゴミ」、「資源ゴミ」など)

* **name**: ゴミの名前です。

* **notice**: このゴミを捨てるときの注意事項を記述します。

* **furigana**: リストで表示する際のラベルとしてのふりがなを指定します。このふりがなによってグルーピングされます。


## その他のカスタマイズについて

### スクリプト

メインのスクリプトファイルは　js/script.jsをカスタマイズしてください。

### CSS

cssはcustom.cssとなっております。

### 利用しているライブラリ

このアプリケーションは

- [Twitter bootstrap](http://getbootstrap.com/javascript/)

- [mobile-bookmark-bubble](https://code.google.com/p/mobile-bookmark-bubble/)

を使用しており、それらのファイルも含まれております。


### 定数

js/setting.jpに定数を追加しています。(茨城町版仕様より追加)

* SVGLabel: SVGイメージを使用するときは、true ※金沢市版はSVGも用意している為、trueを指定します。用意できない場合は、falseを指定して下さい。

* MaxDescription: ごみの最大の種類数を指定します。最大値9を超えない場合は設定の必要は特にありません。

* MaxMonth: 何ヶ月先まで計算するかを指定します。

* WeekShift: 金沢仕様の休止期間なら週をずらす処理を有効にするときは、trueを指定します。 茨城町版の記述方法で指定した場合はfalseを指定します。
